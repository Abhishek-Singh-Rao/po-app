<mvc:View 
  controllerName="com.ycl.purchaseorder.controller.Detail"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:f="sap.f"
  xmlns:layout="sap.ui.layout"
  xmlns:form="sap.ui.layout.form"
  xmlns:core="sap.ui.core"
  height="100%">

  <f:DynamicPage 
    id="detailDynamicPage" 
    preserveHeaderStateOnScroll="true" 
    headerExpanded="true"
    showFooter="false" 
    fitContent="true">

    <!-- DynamicPage Title -->
    <f:title>
      <f:DynamicPageTitle>
        <f:heading>
          <Title text="{Description}" />
        </f:heading>

        <f:snappedTitleOnMobile>
          <Title text="{Description}" />
        </f:snappedTitleOnMobile>

        <f:actions>
          <ToolbarSpacer/>
          <Button icon="sap-icon://nav-back" press=".onNavBack" tooltip="Back" />
        </f:actions>
      </f:DynamicPageTitle>
    </f:title>

    <!-- DynamicPage Header (Form Section) -->
    <f:header>
      <f:DynamicPageHeader pinnable="true">
        <FlexBox alignItems="Start" justifyContent="Start">
          <items>
            <Panel backgroundDesign="Transparent" class="sapUiNoContentPadding">
              <content>
                <layout:HorizontalLayout>
                  <layout:VerticalLayout class="sapUiMediumMarginEnd">
                    <ObjectAttribute title="PO Number" text="{ID}" />
                    <ObjectAttribute title="Description" text="{Description}" />
                    <ObjectAttribute title="Vendor" text="{Vendor/Description} ({Vendor/Number})" />
                    <ObjectAttribute title="Company Code" text="{Company/Description} ({Company/Code})" />
                    <ObjectAttribute title="Document Type" text="{DocumentType_ID}" />
                  </layout:VerticalLayout>
                </layout:HorizontalLayout>
              </content>
            </Panel>
          </items>
        </FlexBox>
      </f:DynamicPageHeader>
    </f:header>

    <!-- Main Content (Item Table unchanged) -->
    <f:content>
      <Panel headerText="Item Details">
        <Table items="{Items}">
          <columns>
            <Column hAlign="Begin"><Text text="Item Number" /></Column>
            <Column  hAlign="Begin"><Text text="Description" /></Column>
            <Column hAlign="Right"><Text text="Quantity" /></Column>
            <Column hAlign="Center"><Text text="UoM" /></Column>
            <Column hAlign="End"><Text text="Rate" /></Column>
            <Column hAlign="End"><Text text="Amount" /></Column>
          </columns>
          <items>
            <ColumnListItem>
              <cells>
                <Text text="{ItemNo}" />
                <Text text="{Description}" />
                <Text text="{Quantity}" />
                <Text text="{Uom}" />
                <ObjectNumber
                      number="{ path: 'Rate',
                        type: 'sap.ui.model.type.Float',
                        formatOptions: {
                          minFractionDigits: 2,
                          maxFractionDigits: 2
                        }
                      }"
                      unit="INR"/>
                <ObjectNumber
                    number="{ path: 'Amount',
                      type: 'sap.ui.model.type.Float',
                      formatOptions: {
                        minFractionDigits: 2,
                        maxFractionDigits: 2
                      }
                    }"
                    unit="INR"/>
              </cells>
            </ColumnListItem>
          </items>
        </Table>
      </Panel>
    </f:content>
    
  </f:DynamicPage>
</mvc:View>
