<mvc:View
    controllerName="com.ycl.purchaseorder.controller.List"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:fb="sap.ui.comp.filterbar"
    xmlns:svm="sap.ui.comp.smartvariants"
    xmlns:core="sap.ui.core"
>
    <f:DynamicPage
        headerExpanded="true"
        fitContent="false"
        showFooter="true"
    >
        <f:title>
            <f:DynamicPageTitle>
                <f:heading>
                    <svm:SmartVariantManagement
                        id="svm"
                        showExecuteOnSelection="true"
                        enableExecuteOnSelection="true"
                    />
                </f:heading>
                <f:expandedContent>
                    <Label
                        id="expandedLabel"
                        text="No filters active"
                    />
                </f:expandedContent>
                <f:snappedContent>
                    <Label
                        id="snappedLabel"
                        text="No filters active"
                    />
                </f:snappedContent>
            </f:DynamicPageTitle>
        </f:title>

        <f:header>
            <f:DynamicPageHeader>
                <f:content>
                    <fb:FilterBar
                        id="filterbar"
                        persistencyKey="myPersKey"
                        useToolbar="false"
                        search=".onSearch"
                        filterChange=".onFilterChange"
                        afterVariantLoad=".onAfterVariantLoad"
                    >
                        <fb:filterGroupItems>
                            <fb:FilterGroupItem
                                name="ID"
                                label="PO Number"
                                groupName="Group1"
                                visibleInFilterBar="true"
                            >
                                <fb:control>
                                    <MultiComboBox
                                        selectionChange=".onSelectionChange"
                                        items="{ path: '/PurchaseOrder', parameters: { top: 100 } }"
                                    >
                                        <core:Item
                                            key="{ID}"
                                            text="{ID}"
                                        />
                                    </MultiComboBox>
                                </fb:control>
                            </fb:FilterGroupItem>

                            <fb:FilterGroupItem
                                name="Description"
                                label="PO Description"
                                groupName="Group1"
                                visibleInFilterBar="true"
                            >
                                <fb:control>
                                    <MultiComboBox
                                        selectionChange=".onSelectionChange"
                                        items="{ path: '/PurchaseOrder', parameters: { top: 100 } }"
                                    >
                                        <core:Item
                                            key="{Description}"
                                            text="{Description}"
                                        />
                                    </MultiComboBox>
                                </fb:control>
                            </fb:FilterGroupItem>

                            <fb:FilterGroupItem
                                name="Company_Code"
                                label="Company"
                                groupName="Group1"
                                visibleInFilterBar="true"
                            >
                                <fb:control>
                                    <MultiComboBox
                                        selectionChange=".onSelectionChange"
                                        items="{ path: '/Company', parameters: { top: 100 } }"
                                    >
                                        <core:Item
                                            key="{Code}"
                                            text="{Code}"
                                        />
                                    </MultiComboBox>
                                </fb:control>
                            </fb:FilterGroupItem>

                            <fb:FilterGroupItem
                                name="Vendor_Number"
                                label="Vendor"
                                groupName="Group1"
                                visibleInFilterBar="true"
                            >
                                <fb:control>
                                    <MultiComboBox
                                        selectionChange=".onSelectionChange"
                                        items="{ path: '/Vendor', parameters: { top: 100 } }"
                                    >
                                        <core:Item
                                            key="{Number}"
                                            text="{Number}"
                                        />
                                    </MultiComboBox>
                                </fb:control>
                            </fb:FilterGroupItem>

                            <fb:FilterGroupItem
                                name="DocumentType_ID"
                                label="Document Type"
                                groupName="Group1"
                                visibleInFilterBar="true"
                            >
                                <fb:control>
                                    <MultiComboBox
                                        selectionChange=".onSelectionChange"
                                        items="{ path: '/DocumentType', parameters: { top: 100 } }"
                                    >
                                        <core:Item
                                            key="{ID}"
                                            text="{ID}"
                                        />
                                    </MultiComboBox>
                                </fb:control>
                            </fb:FilterGroupItem>
                        </fb:filterGroupItems>
                    </fb:FilterBar>
                </f:content>
            </f:DynamicPageHeader>
        </f:header>

        <f:content>
            <Table
                id="table"
                growing="true"
                growingThreshold="5"
                growingScrollToLoad="true"
                items="{ path: '/PurchaseOrder', parameters: { expand: 'Items,Company,Vendor,DocumentType' } }"
                mode="SingleSelectLeft"
            >
                <headerToolbar>
                    <OverflowToolbar>
                        <Title text="Purchase Orders" />
                        <ToolbarSpacer />
                        <Button
                            id="b2"
                            icon="sap-icon://add"
                            press=".onOpenCreateDialog"
                        />
                        <Button
                            id="b4"
                            icon="sap-icon://delete"
                            press=".onDeleteProduct"
                        />
                    </OverflowToolbar>
                </headerToolbar>

                <columns>
                    <Column hAlign="Begin">
                        <Text text="PO Number" />
                    </Column>
                    <Column hAlign="Begin">
                        <Text text="Company" />
                    </Column>
                    <Column hAlign="Begin">
                        <Text text="Vendor" />
                    </Column>
                    <Column hAlign="Begin">
                        <Text text="Document Type" />
                    </Column>
                    <Column hAlign="End">
                        <Text text="Total Amount" />
                    </Column>
                </columns>

                <items>
                    <ColumnListItem
                        type="Active"
                        press=".onItemPress"
                    >
                        <cells>
                            <ObjectIdentifier
                                title="{Description}"
                                text="{ID}"
                            />
                            <Text
                                text="{Company/Description} ({Company/Code})"
                            />
                            <Text
                                text="{Vendor/Description} ({Vendor/Number})"
                            />
                            <Text text="{DocumentType_ID}" />
                            <Text
                                text="{path: 'Items', formatter: '.formatTotalAmount'}"
                            />
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
        </f:content>

        <!-- Footer with Buttons -->
        <!-- <f:footer>
            <Bar>
                <contentRight>
                <Button id="b2" icon="sap-icon://add" press=".onOpenCreateDialog" />
                <Button id="b3" icon="sap-icon://edit" press=".onOpenUpdateDialog" />
                <Button id="b4" icon="sap-icon://delete" press=".onDeleteProduct" />
                </contentRight>
            </Bar>
        </f:footer> -->
    </f:DynamicPage>
</mvc:View>
